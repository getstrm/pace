# dbt module

This PACE module is used to extend dbt with Data Policies as PACE knows them.

## Setup

Assuming that you have a Python environment set up (feel free to use Pipenv, Virtualenv, etc), you
can install the required packages with the following command:

```shell
pip install dbt-postgres
pip install dbt-bigquery
```

The directory `dbt_sample_project` has been created with the following command:

```shell
dbt init dbt_sample_project
dbt seed
```

## To do

- Add support for specifying field transforms in column meta.
    - When field transforms are specified on column level, any transforms under model meta are
      ignored.
    - Target ref and row filters remain under model meta.
    - For docs: target ref fqn doesn't necessarily need to be specified, there is a default suffix
      of '_view'.
- Return detailed validation feedback to the user.
- Write PACE view SQL to models dir, taking target ref into account.
- Write PACE view schema yamls to models dir.
- add autogenerated header for generated sql files to instruct the user to the correct workflow.
- Find out a way to integrate PACE into the dbt workflow without making it a manual step.

PACE Core:
- Ensure it's possible to extend an existing ruleset with a global transform
- Global rulesets may result in duplicate target refs
- [x] If a data type is absent in a source schema, fall back to implicit types, that require explicit quotes in the rule set YAML in the schema.yml model. -> we require literals for dbt models, as data types are often absent.
