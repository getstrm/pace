rule_sets:
  - target:
      fullname: STRM.POC.GDDDEMO_V3
    filters:
      - conditions:
          - principals: [ {group: FRAUD_AND_RISK} ]
            condition: "true"
          - principals: []
            condition: "age > 8"
      - conditions:
          - principals : []
            condition: "transactionamount < 10"
    field_transforms:
      - field:
          name_parts: [ userid ]
        transforms:
          - principals: [ "FRAUD_AND_RISK"]
            identity: {}
          - principals: []
            hash:
              seed: "1234"
      - field:
          name_parts: [ email ]
        transforms:
          - principals: [ {group: MARKETING} ]
            regexp:
              regexp: "^.*(@.*)$"
              replacement: "****$1"
          - principals: [ FRAUD_AND_RISK]
            identity: {}
          - principals: []
            fixed:
              value: "****"
      - field:
          name_parts: [ haircolor ]
        transforms:
          - principals: []
            sql_statement:
              statement: "CASE WHEN haircolor = 'blonde' THEN 'fair' ELSE 'dark' END"
info:
  description: snowflake
  tags:
    - purpose:marketing
  title: Snowflake
source:
  ref: POC.GDDEMO
  fields:
    - name_parts:
        - transactionid
      type: numeric
    - name_parts:
        - userid
      tags:
        - PII
        - sensitive
      type: varchar
    - name_parts:
        - email
      tags:
        - PII
        - sensitive
      type: varchar
    - name_parts:
        - age
      tags:
        - sensitive
      type: numeric
    - name_parts:
        - size
      type: varchar
    - name_parts:
        - haircolor
      type: varchar
    - name_parts:
        - transactionamount
      tags:
        - sensitive
      type: numeric
    - name_parts:
        - items
      type: varchar
    - name_parts:
        - itemcount
      type: numeric
    - name_parts:
        - date
      type: time
    - name_parts:
        - purpose
      type: numeric
platform:
  id: snowflake-demo
  platform_type: SNOWFLAKE
