{"$schema":"http://json-schema.org/draft-04/schema#","$ref":"#/definitions/EvaluateDataPolicyRequest","definitions":{"EvaluateDataPolicyRequest":{"properties":{"inline_data_policy":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy","additionalProperties":false},"data_policy_ref":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicyRef","additionalProperties":false},"principals":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Principal"},"additionalProperties":false,"type":"array","description":"Evaluate a data policy for these principals against a sample of data. If left empty, the policy will be evaluated against all principals. In order to evaluate the policy for a principal that does not occur in the policy, add a principal message without the `principal` field set. This will be treated as the `other` principal."},"csv_sample":{"$ref":"#/definitions/getstrm.pace.api.data_policies.v1alpha.EvaluateDataPolicyRequest.CsvSample","additionalProperties":false,"description":"CSV-formatted sample data to evaluate the policy against. The first row must be a header row."}},"additionalProperties":false,"type":"object","title":"Evaluate Data Policy Request"},"getstrm.pace.api.data_policies.v1alpha.EvaluateDataPolicyRequest.CsvSample":{"properties":{"csv":{"type":"string","description":"The CSV-formatted sample data to evaluate the policy against. The first row must be a header row."}},"additionalProperties":false,"type":"object","title":"Csv Sample"},"getstrm.pace.api.entities.v1alpha.DataCatalog":{"properties":{"id":{"type":"string","description":"An arbitrary but unique identifier for the catalog. This matches the id from the PACE app configuration."},"type":{"enum":["TYPE_UNSPECIFIED",0,"COLLIBRA",1,"ODD",2,"DATAHUB",3],"oneOf":[{"type":"string"},{"type":"integer"}],"title":"Type"},"databases":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.Database"},"additionalProperties":false,"type":"array","description":"A top-most level of the catalog. This is typically a database."},"tags":{"items":{"type":"string"},"type":"array"}},"additionalProperties":false,"type":"object","title":"Data Catalog"},"getstrm.pace.api.entities.v1alpha.DataPolicy":{"properties":{"source":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Source","additionalProperties":false},"metadata":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Metadata","additionalProperties":false},"rule_sets":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet"},"additionalProperties":false,"type":"array"}},"additionalProperties":false,"type":"object","title":"Data Policy"},"getstrm.pace.api.entities.v1alpha.DataPolicy.Field":{"properties":{"name_parts":{"items":{"type":"string"},"type":"array","description":"Instead of using \"nodes\", nesting can be expressed by specifying multiple name parts. A flat table (e.g. csv file) will only contain a single name part for all fields."},"type":{"type":"string","description":"The data type of the field."},"required":{"type":"boolean","description":"Whether the field is required. If not, the field may be null."},"tags":{"items":{"type":"string"},"type":"array"}},"additionalProperties":false,"type":"object","title":"Field"},"getstrm.pace.api.entities.v1alpha.DataPolicy.Metadata":{"properties":{"title":{"type":"string"},"description":{"type":"string"},"version":{"type":"integer","description":"For new policies, the version does not need to be set. When updating a policy, the version must match the current version. The version is then automatically incremented."},"create_time":{"type":"string","format":"date-time"},"update_time":{"type":"string","format":"date-time"},"tags":{"items":{"type":"string"},"type":"array"},"last_apply_time":{"type":"string","description":"The last time the policy was applied to the target(s).","format":"date-time"}},"additionalProperties":false,"type":"object","title":"Metadata"},"getstrm.pace.api.entities.v1alpha.DataPolicy.Principal":{"properties":{"group":{"type":"string","description":"a group of users, different for each platform"},"role":{"type":"string","description":"a user role, currently only supported for Google IAM roles with BigQuery IAM Check Extension"},"permission":{"type":"string","description":"a permission, currently only supported for Google IAM permissions in BigQuery IAM Check Extension"}},"additionalProperties":false,"type":"object","title":"Principal"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet":{"properties":{"target":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Target","additionalProperties":false},"field_transforms":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform"},"additionalProperties":false,"type":"array","description":"Zero or more field transforms. Any field for which no field transform is specified will be included as-is."},"filters":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter"},"additionalProperties":false,"type":"array","description":"Zero or more filters. Records that match the conditions are included in the result. When no filters are defined, all records are always included."}},"additionalProperties":false,"type":"object","title":"Rule Set"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform":{"properties":{"field":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Field","additionalProperties":false},"transforms":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform"},"additionalProperties":false,"type":"array","description":"The last condition in the list must have 0 principals, as this acts as the default / else condition. Transforms should have mutually exclusive sets of principals."}},"additionalProperties":false,"type":"object","title":"Field Transform"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform":{"properties":{"principals":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Principal"},"additionalProperties":false,"type":"array","description":"The principals (e.g. groups) for which this transform will be applied."},"regexp":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Regexp","additionalProperties":false,"description":"Extract and optionally replace a value in a field using a regular expression."},"identity":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Identity","additionalProperties":false,"description":"Use the identity transform to copy a field value as-is."},"fixed":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Fixed","additionalProperties":false,"description":"Provide a fixed value for the field."},"hash":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Hash","additionalProperties":false,"description":"Hash the field value, optionally with a seed. The exact algorithm is platform-specific."},"sql_statement":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.SqlStatement","additionalProperties":false,"description":"Execute a SQL statement to transform the field value. The exact syntax is platform-specific."},"nullify":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Nullify","additionalProperties":false,"description":"Make the field value null."},"detokenize":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Detokenize","additionalProperties":false,"description":"Replaces a tokenized field value with its original value, looked up in a token source. If no value is found, the tokenized value is left as-is."},"numeric_rounding":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.NumericRounding","additionalProperties":false,"description":"Round a numeric value with the specified rounding."},"aggregation":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Aggregation","additionalProperties":false,"description":"Aggregate the field value for specified grouping by other fields."}},"additionalProperties":false,"type":"object","title":"Transform"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Aggregation":{"properties":{"sum":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Aggregation.Sum","additionalProperties":false},"avg":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Aggregation.Avg","additionalProperties":false},"min":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Aggregation.Min","additionalProperties":false},"max":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Aggregation.Max","additionalProperties":false},"partition_by":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Field"},"additionalProperties":false,"type":"array","description":"The fields to partition by."}},"additionalProperties":false,"type":"object","title":"Aggregation"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Aggregation.Avg":{"properties":{"precision":{"type":"integer","description":"The precision to use for rounding. When empty, the value is not rounded"},"cast_to":{"type":"string","description":"Type to cast the original field to before applying the aggregation. By default any field will be cast to decimal."}},"additionalProperties":false,"type":"object","title":"Avg"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Aggregation.Max":{"additionalProperties":false,"type":"object","title":"Max"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Aggregation.Min":{"additionalProperties":false,"type":"object","title":"Min"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Aggregation.Sum":{"additionalProperties":false,"type":"object","title":"Sum"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Detokenize":{"properties":{"token_source_ref":{"type":"string","description":"Full reference to the token source, e.g. a fully qualified table name."},"token_field":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Field","additionalProperties":false,"description":"The field in the token source that contains the token. Only the name parts are required."},"value_field":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Field","additionalProperties":false,"description":"The field in the token source that contains the value. Only the name parts are required."}},"additionalProperties":false,"type":"object","title":"Detokenize"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Fixed":{"properties":{"value":{"type":"string"}},"additionalProperties":false,"type":"object","title":"Fixed"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Hash":{"properties":{"seed":{"type":"string"}},"additionalProperties":false,"type":"object","title":"Hash"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Identity":{"additionalProperties":false,"type":"object","title":"Identity"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Nullify":{"additionalProperties":false,"type":"object","title":"Nullify"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.NumericRounding":{"properties":{"ceil":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.NumericRounding.Ceil","additionalProperties":false,"description":"Round the value to the nearest integer (e.g. 1.5 becomes 2), respecting the divisor."},"floor":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.NumericRounding.Floor","additionalProperties":false,"description":"Round the value down to the nearest integer (e.g. 1.5 becomes 1), respecting the divisor."},"round":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.NumericRounding.Round","additionalProperties":false,"description":"Use regular natural rounding (e.g. 1.5 becomes 2, 1.4 becomes 1), respecting the precision."}},"additionalProperties":false,"type":"object","title":"Numeric Rounding"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.NumericRounding.Ceil":{"properties":{"divisor":{"type":"number","description":"The divisor to use when applying integer division. Values < 1 allow for rounding to decimal places."}},"additionalProperties":false,"type":"object","title":"Ceil"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.NumericRounding.Floor":{"properties":{"divisor":{"type":"number","description":"The divisor to use when applying integer division. Values < 1 allow for rounding to decimal places."}},"additionalProperties":false,"type":"object","title":"Floor"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.NumericRounding.Round":{"properties":{"precision":{"type":"integer","description":"The precision to use for rounding. When positive, the value is rounded to the nearest decimal place. When negative, the value is rounded to the nearest power of 10."},"divisor":{"type":"number","description":"The divisor to use when applying integer division. Advise is to use divisors only when rounding to a multiple of that divisor, with a precision of 0."}},"additionalProperties":false,"type":"object","title":"Round"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.Regexp":{"properties":{"regexp":{"type":"string"},"replacement":{"type":"string","description":"Use dollar signs to reference capturing groups in the replacement, e.g. \"my-replacement-$1-$2\". If the replacement is left empty, the regexp match result (full match or first capturing group) is used."}},"additionalProperties":false,"type":"object","title":"Regexp"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.FieldTransform.Transform.SqlStatement":{"properties":{"statement":{"type":"string"}},"additionalProperties":false,"type":"object","title":"Sql Statement"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter":{"properties":{"retention_filter":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter.RetentionFilter","additionalProperties":false},"generic_filter":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter.GenericFilter","additionalProperties":false}},"additionalProperties":false,"type":"object","title":"Filter"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter.GenericFilter":{"properties":{"conditions":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter.GenericFilter.Condition"},"additionalProperties":false,"type":"array","description":"The last condition in the list must have 0 principals, as this acts as the default / else condition."}},"additionalProperties":false,"type":"object","title":"Generic Filter"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter.GenericFilter.Condition":{"properties":{"principals":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Principal"},"additionalProperties":false,"type":"array","description":"The principals (e.g. groups) that apply to this condition."},"condition":{"type":"string","description":"A (platform-specific) SQL expression. If it evaluates to true, the principals are allowed to access the data."}},"additionalProperties":false,"type":"object","title":"Condition"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter.RetentionFilter":{"properties":{"field":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Field","additionalProperties":false,"description":"The field of type SQL date with timestamp."},"conditions":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter.RetentionFilter.Condition"},"additionalProperties":false,"type":"array","description":"The last condition in the list must have 0 principals, as this acts as the default / else condition."}},"additionalProperties":false,"type":"object","title":"Retention Filter"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter.RetentionFilter.Condition":{"properties":{"principals":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Principal"},"additionalProperties":false,"type":"array","description":"The principals (e.g. groups) that apply to this condition."},"period":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter.RetentionFilter.Period","additionalProperties":false,"description":"The retention period for the data measured in days after creation. If empty or null, defaults to infinite retention period."}},"additionalProperties":false,"type":"object","title":"Condition"},"getstrm.pace.api.entities.v1alpha.DataPolicy.RuleSet.Filter.RetentionFilter.Period":{"properties":{"days":{"type":"string","description":"Number of days since the creation date."}},"additionalProperties":false,"type":"object","title":"Period"},"getstrm.pace.api.entities.v1alpha.DataPolicy.Source":{"properties":{"ref":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.ResourceUrn","additionalProperties":false,"description":"The ref is an identifier for the source, unique at the source platform level. TODO I think this should be renamed to fqn"},"fields":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataPolicy.Field"},"additionalProperties":false,"type":"array","description":"A representation of the source data schema. Nested fields are supported."},"tags":{"items":{"type":"string"},"type":"array"}},"additionalProperties":false,"type":"object","title":"Source"},"getstrm.pace.api.entities.v1alpha.DataPolicy.Target":{"properties":{"type":{"enum":["TARGET_TYPE_UNSPECIFIED",0,"SQL_VIEW",1,"DBT_SQL",2],"oneOf":[{"type":"string"},{"type":"integer"}],"title":"Target Type"},"ref":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.ResourceUrn","additionalProperties":false,"description":"The full and unique name to be used in the target platform. E.g. the view name."}},"additionalProperties":false,"type":"object","title":"Target"},"getstrm.pace.api.entities.v1alpha.DataPolicyRef":{"properties":{"platform_id":{"type":"string"},"data_policy_id":{"type":"string"}},"additionalProperties":false,"type":"object","title":"Data Policy Ref"},"getstrm.pace.api.entities.v1alpha.Database":{"properties":{"id":{"type":"string","description":"The id of the database"},"type":{"type":"string"},"display_name":{"type":"string"},"catalog":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataCatalog","additionalProperties":false},"processing_platform":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.ProcessingPlatform","additionalProperties":false},"schemas":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.Schema"},"additionalProperties":false,"type":"array","description":"The schemas in this database."},"tags":{"items":{"type":"string"},"type":"array"}},"additionalProperties":false,"type":"object","title":"Database"},"getstrm.pace.api.entities.v1alpha.ProcessingPlatform":{"properties":{"platform_type":{"enum":["PLATFORM_TYPE_UNSPECIFIED",0,"DATABRICKS",1,"SNOWFLAKE",2,"BIGQUERY",3,"POSTGRES",4,"SYNAPSE",5],"oneOf":[{"type":"string"},{"type":"integer"}],"title":"Platform Type"},"id":{"type":"string","description":"An arbitrary but unique identifier for the platform. This matches the id from the PACE app configuration."}},"additionalProperties":false,"type":"object","title":"Processing Platform"},"getstrm.pace.api.entities.v1alpha.ResourceNode":{"properties":{"name":{"type":"string","description":"the bits between the slashes. the technical path to the data. can be uuid (Collibra for instance)"},"platform_name":{"type":"string","description":"dataset, schema, table, whatever... For display purposes only. FIXME platform type"},"is_leaf":{"type":"boolean","description":"data resource"},"display_name":{"type":"string","description":"human readable string. If absent use name."}},"additionalProperties":false,"type":"object","title":"Resource Node"},"getstrm.pace.api.entities.v1alpha.ResourceUrn":{"properties":{"platform":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.ProcessingPlatform","additionalProperties":false},"catalog":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.DataCatalog","additionalProperties":false},"resource_path":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.ResourceNode"},"additionalProperties":false,"type":"array"},"integration_fqn":{"type":"string","description":"the Fully Qualified Name of the data resource on the processing platform / data catalog."}},"additionalProperties":false,"type":"object","title":"Resource Urn"},"getstrm.pace.api.entities.v1alpha.Schema":{"properties":{"id":{"type":"string","description":"The id used by the catalog."},"name":{"type":"string","description":"The parent database to which this schema belongs."},"database":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.Database","additionalProperties":false},"tables":{"items":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.Table"},"additionalProperties":false,"type":"array","description":"The tables in this schema."},"tags":{"items":{"type":"string"},"type":"array"}},"additionalProperties":false,"type":"object","title":"Schema"},"getstrm.pace.api.entities.v1alpha.Table":{"properties":{"id":{"type":"string","description":"The id used by the catalog."},"name":{"type":"string"},"schema":{"$ref":"#/definitions/getstrm.pace.api.entities.v1alpha.Schema","additionalProperties":false,"description":"The parent schema to which this table belongs."},"tags":{"items":{"type":"string"},"type":"array"}},"additionalProperties":false,"type":"object","title":"Table"}}}
